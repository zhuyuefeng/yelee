title: Postgresql 查询并修改换行符和回车符
date: '2019-04-09 17:04:24'
tags: [回车, 换行]
categories: [工作笔记]
---
### 问题描述

&emsp;&emsp;&emsp;工作中遇到一个问题，数据库中某字段是 text 类型，数字与数字之间是以换行的形式存储。但是实际存储是有部分数据是以回车存储，导致在数据流转过程中无法识别，**如何定位到这些记录并修改存储形式呢？**

<!-- more -->

### 了解回车和换行

&emsp;&emsp;&emsp;回车和换行是真的傻傻分不清🤣🤣🤣

>回车 \r :本义是光标重新回到本行开头
换行 \n :本义是光标往下一行（不一定到下一行行首）

| 符号 | ASCII码 | 意义 |
| :---: | :---: | :---: |
| \n |10|换行|
| \r |13|回车|

### 查询数据库中的换行和回车

&emsp;&emsp;&emsp;*通过chr(13)和chr(10)可以将数据查询出来的*
```sql
--通过chr(13)和chr(10)数据查询
SELECT * from 数据表名称 WHERE 字段 like '%'||chr(13)||'%';

SELECT * from 数据表名称 WHERE 字段 like '%'||chr(10)||'%';
```

### 修改数据库中的回车或换行
```sql
--换行修改为回车
update  数据表名称  set  字段 = replace(字段, chr(10),  chr(13))
where  字段  like '%'||chr(10)||'%'
```
